<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peanech.com Admin Dashboard - Communication Tools</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #059669;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --admin-bar-height: 48px;
            /* adjust to match your design */
            --header-height: 64px;
            /* adjust to match your design */
            --top-offset: calc(var(--admin-bar-height) + var(--header-height));
            --sidebar-width: 240px;
            /* sidebar default width */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background-color: var(--light);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header & Navigation */
        header {
            background-color: var(--dark);
            color: white;
            position: sticky;
            top: 0;
            z-index: 50;
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 1.5rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo span {
            color: var(--secondary);
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: #ffffff;
            height: calc(100vh - var(--top-offset));
            position: fixed;
            left: 0;
            top: var(--top-offset);
            box-shadow: var(--shadow);
            overflow-y: auto;
            padding: 0.5rem 0;
            border-right: 1px solid var(--border);
            transition: width 0.18s ease, transform 0.18s ease;
        }

        .sidebar .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar .menu-item {
            display: block;
        }

        .sidebar .menu-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--gray);
            text-decoration: none;
            transition: background-color 0.15s ease, color 0.15s ease, border-left-color 0.15s ease;
            border-left: 4px solid transparent;
        }

        .sidebar .menu-link .menu-icon {
            width: 28px;
            text-align: center;
            font-size: 1.125rem;
            color: inherit;
        }

        .sidebar .menu-link .label {
            white-space: nowrap;
        }

        .sidebar .menu-item:hover .menu-link {
            background-color: var(--light-gray);
            color: var(--dark);
        }

        .sidebar .menu-item.active .menu-link {
            background: linear-gradient(90deg, rgba(37, 99, 235, 0.06), transparent);
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        /* Compact / collapsed state (small screens or explicit collapse) */
        .sidebar.collapsed {
            width: 72px;
        }

        .sidebar.collapsed .label {
            display: none;
        }

        .sidebar.collapsed .menu-link {
            justify-content: center;
        }

        /* Section Styling */
        .section {
            padding: 2rem 0;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .section-header p {
            color: var(--gray);
        }

        .view-all {
            color: var(--primary);
            font-weight: 500;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-actions {
            display: flex;
            gap: 1rem;
        }

        /* Communication Module */
        .communication-management {
            margin-left: var(--sidebar-width);
            padding: 2rem 0 4rem;
            background-color: #f1f5f9;
            transition: margin-left 0.18s ease;
        }

        /* When sidebar is collapsed, shrink content margin */
        .sidebar.collapsed~.communication-management {
            margin-left: 72px;
        }

        /* Messaging System */
        .messaging-container {
            display: flex;
            background: white;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: var(--shadow);
            height: 700px;
        }

        .conversation-list {
            width: 300px;
            border-right: 1px solid var(--border);
            overflow-y: auto;
        }

        .conversation-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .conversation-item:hover {
            background-color: var(--light-gray);
        }

        .conversation-item.active {
            background-color: rgba(37, 99, 235, 0.1);
        }

        .conversation-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .conversation-avatar {
            width: 40px;
            height: 40px;
            background-color: var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.875rem;
        }

        .conversation-details {
            flex: 1;
        }

        .conversation-name {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .conversation-subject {
            color: var(--gray);
            font-size: 0.875rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 180px;
        }

        .conversation-time {
            font-size: 0.75rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }

        .conversation-unread {
            width: 8px;
            height: 8px;
            background-color: var(--secondary);
            border-radius: 50%;
            margin-left: 0.5rem;
        }

        .message-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .message-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .message-title {
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
        }

        .message-content {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background-color: #f8fafc;
        }

        .message {
            max-width: 80%;
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            position: relative;
        }

        .message.received {
            background-color: white;
            align-self: flex-start;
            border: 1px solid var(--border);
        }

        .message.sent {
            background-color: var(--primary);
            color: white;
            align-self: flex-end;
        }

        .message-text {
            margin-bottom: 0.5rem;
        }

        .message-meta {
            font-size: 0.75rem;
            opacity: 0.8;
            display: flex;
            justify-content: space-between;
        }

        .message-time {
            margin-left: 0.5rem;
        }

        .message-footer {
            padding: 1rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 0.5rem;
        }

        .message-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 0.375rem;
            resize: none;
            font-size: 0.875rem;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .send-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            border: none;
            background-color: var(--primary);
            color: white;
            cursor: pointer;
            font-weight: 500;
        }

        .send-btn:hover {
            background-color: var(--primary-dark);
        }

        /* User Communication Log */
        .log-container {
            background: white;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .log-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            background-color: var(--light-gray);
            font-weight: 600;
            color: var(--dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background-color: var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.875rem;
        }

        .user-details {
            font-weight: 600;
            color: var(--dark);
        }

        .log-actions {
            display: flex;
            gap: 1rem;
        }

        .log-content {
            padding: 1rem;
        }

        .log-entry {
            display: flex;
            gap: 0.75rem;
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-icon {
            width: 32px;
            height: 32px;
            background-color: var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .log-content {
            flex: 1;
        }

        .log-type {
            font-weight: 600;
            color: var(--primary);
        }

        .log-subject {
            color: var(--dark);
            margin: 0.25rem 0;
        }

        .log-message {
            color: var(--gray);
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .log-time {
            color: var(--gray);
            font-size: 0.75rem;
        }

        .log-actions-cell {
            display: flex;
            gap: 0.5rem;
        }

        .log-btn {
            padding: 0.5rem;
            border-radius: 0.25rem;
            border: none;
            background-color: var(--light-gray);
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .log-btn:hover {
            background-color: var(--border);
            color: var(--dark);
        }

        .reply-btn {
            color: var(--primary);
        }

        .reply-btn:hover {
            background-color: rgba(37, 99, 235, 0.1);
        }

        .ticket-status {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-open {
            background-color: rgba(234, 88, 12, 0.1);
            color: #ea580c;
        }

        .status-closed {
            background-color: rgba(5, 150, 105, 0.1);
            color: var(--secondary);
        }

        .status-pending {
            background-color: rgba(156, 163, 175, 0.1);
            color: #6b7280;
        }

        /* Notification badge styling (moved from inline) */
        .notification-count-badge {
            background-color: var(--secondary);
            color: white;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            display: inline-block;
            line-height: 1;
            min-width: 18px;
            text-align: center;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .nav-links,
            .user-actions {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--dark);
                flex-direction: column;
                box-shadow: var(--shadow);
                padding: 1rem;
                gap: 1rem;
            }

            .nav-links.show,
            .user-actions.show {
                display: flex;
            }

            .section {
                padding: 1.5rem 0;
            }

            .search-filter {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .search-input {
                width: 100%;
            }

            .action-buttons {
                width: 100%;
                justify-content: flex-end;
            }

            .filters-bar {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .messaging-container {
                flex-direction: column;
                height: 600px;
            }

            .conversation-list {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
        }

        @media (max-width: 640px) {
            .admin-bar {
                flex-direction: column;
                gap: 0.75rem;
                text-align: center;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .log-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .log-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
    </style>
</head>

<body>
    <!-- Admin Bar -->
    <div class="admin-bar">
        <div class="left">
            <a href="/admin/"><i class="fas fa-lock"></i> Admin Dashboard</a>
            <a href="/"><i class="fas fa-home"></i> View Public Site</a>
        </div>
        <div class="right">
            <a href="#" class="notification-badge"><i class="fas fa-bell"></i> Notifications <span
                    class="notification-count-badge">3</span></a>
            <a href="#"><i class="fas fa-user-circle"></i> Admin User</a>
            <a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
    </div>

    <!-- Header -->
    <header>
        <a href="/admin/" class="logo">
            <i class="fas fa-home"></i> Peanech Admin Dashboard
        </a>
    </header>

    <!-- Sidebar -->
    <div class="sidebar" aria-label="Main sidebar navigation">
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="/admin/Admin-Dashboard.html" class="menu-link">
                    <i class="fas fa-tachometer-alt menu-icon" aria-hidden="true"></i>
                    <span class="label">Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/Property-Listings-Management.html" class="menu-link">
                    <i class="fas fa-building menu-icon" aria-hidden="true"></i>
                    <span class="label">Listings</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/User-Management.html" class="menu-link">
                    <i class="fas fa-users menu-icon" aria-hidden="true"></i>
                    <span class="label">Users</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/Agent-Agency-Management.html" class="menu-link">
                    <i class="fas fa-user-tie menu-icon" aria-hidden="true"></i>
                    <span class="label">Agents</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/Content-Management-System.html" class="menu-link">
                    <i class="fas fa-file-alt menu-icon" aria-hidden="true"></i>
                    <span class="label">Content</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/Finance-Billing.html" class="menu-link">
                    <i class="fas fa-dollar-sign menu-icon" aria-hidden="true"></i>
                    <span class="label">Finance</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/Reports.html" class="menu-link">
                    <i class="fas fa-chart-line menu-icon" aria-hidden="true"></i>
                    <span class="label">Reports</span>
                </a>
            </li>
            <li class="menu-item active">
                <a href="/admin/Communication-Tools.html" class="menu-link" aria-current="page">
                    <i class="fas fa-comments menu-icon" aria-hidden="true"></i>
                    <span class="label">Communication</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="/admin/Settings.html" class="menu-link">
                    <i class="fas fa-cog menu-icon" aria-hidden="true"></i>
                    <span class="label">Settings</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Communication Tools -->
    <section class="communication-management">
        <div class="container">
            <div class="section-header">
                <div>
                    <h2>Communication Tools</h2>
                    <p>Manage internal messaging, user support tickets, and communication channels.</p>
                </div>
                <div class="section-actions">
                    <button class="btn btn-outline">Refresh</button>
                    <button class="btn btn-primary">Export Data</button>
                </div>
            </div>

            <div class="communication-tabs">
                <div class="communication-tab active">Internal Messaging</div>
                <div class="communication-tab">User Communication Log</div>
            </div>

            <div class="filters-bar">
                <div class="search-filter">
                    <input type="text" placeholder="Search messages or users..." class="search-input">
                    <select class="filter-select">
                        <option>All Types</option>
                        <option>Listing Discussion</option>
                        <option>User Issue</option>
                        <option>Billing Query</option>
                        <option>Technical Support</option>
                    </select>
                    <select class="filter-select">
                        <option>All Status</option>
                        <option>Unread</option>
                        <option>Read</option>
                        <option>Archived</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-outline"><i class="fas fa-filter"></i> Advanced Filters</button>
                    <button class="btn btn-primary" id="newMessageBtn"><i class="fas fa-plus"></i> New Message</button>
                </div>
            </div>

            <!-- Internal Messaging System -->
            <div id="messaging-system">
                <div class="messaging-container">
                    <div class="conversation-list">
                        <div class="conversation-item active">
                            <div class="conversation-info">
                                <div class="conversation-avatar">JS</div>
                                <div class="conversation-details">
                                    <div class="conversation-name">James Wilson</div>
                                    <div class="conversation-subject">Luxury Villa in Toul Kork - Verification</div>
                                </div>
                                <div class="conversation-time">10:30 AM</div>
                            </div>
                        </div>

                        <div class="conversation-item">
                            <div class="conversation-info">
                                <div class="conversation-avatar">LC</div>
                                <div class="conversation-details">
                                    <div class="conversation-name">Lisa Chen</div>
                                    <div class="conversation-subject">CBRE Cambodia - Subscription Issue</div>
                                </div>
                                <div class="conversation-time">Yesterday</div>
                            </div>
                        </div>

                        <div class="conversation-item">
                            <div class="conversation-info">
                                <div class="conversation-avatar">TK</div>
                                <div class="conversation-details">
                                    <div class="conversation-name">Thomas Kim</div>
                                    <div class="conversation-subject">Market Report - Data Request</div>
                                </div>
                                <div class="conversation-time">Sep 10</div>
                            </div>
                        </div>

                        <div class="conversation-item">
                            <div class="conversation-info">
                                <div class="conversation-avatar">MJ</div>
                                <div class="conversation-details">
                                    <div class="conversation-name">Maria Johnson</div>
                                    <div class="conversation-subject">User Reported Listing #7789</div>
                                </div>
                                <div class="conversation-time">Sep 8</div>
                            </div>
                        </div>

                        <div class="conversation-item">
                            <div class="conversation-info">
                                <div class="conversation-avatar">AS</div>
                                <div class="conversation-details">
                                    <div class="conversation-name">Alex Smith</div>
                                    <div class="conversation-subject">Website Performance Issues</div>
                                </div>
                                <div class="conversation-time">Sep 5</div>
                            </div>
                        </div>

                        <div class="conversation-item">
                            <div class="conversation-info">
                                <div class="conversation-avatar">SK</div>
                                <div class="conversation-details">
                                    <div class="conversation-name">Sarah Kim</div>
                                    <div class="conversation-subject">Content Update - Privacy Policy</div>
                                </div>
                                <div class="conversation-time">Sep 1</div>
                            </div>
                        </div>
                    </div>

                    <div class="message-area">
                        <div class="message-header">
                            <h3 class="message-title"><i class="fas fa-user"></i> James Wilson - Luxury Villa in Toul
                                Kork</h3>
                            <div class="message-actions">
                                <button class="btn btn-outline"><i class="fas fa-archive"></i> Archive</button>
                                <button class="btn btn-outline"><i class="fas fa-trash"></i> Delete</button>
                            </div>
                        </div>

                        <div class="message-content">
                            <div class="message received">
                                <div class="message-text">
                                    Hi team, I've reviewed the "Luxury Villa in Toul Kork" listing (ID: LV-789456) and
                                    noticed some discrepancies in the photos. The swimming pool in the current images
                                    doesn't match the one in the floor plan. Can someone from the verification team
                                    check this?
                                </div>
                                <div class="message-meta">
                                    <div>James Wilson</div>
                                    <div class="message-time">10:30 AM</div>
                                </div>
                            </div>

                            <div class="message sent">
                                <div class="message-text">
                                    Thanks for flagging this, James. I've assigned this to Maria for verification.
                                    She'll contact the agent for updated photos and documentation. I'll keep you posted
                                    on the status.
                                </div>
                                <div class="message-meta">
                                    <div>You</div>
                                    <div class="message-time">10:45 AM</div>
                                </div>
                            </div>

                            <div class="message received">
                                <div class="message-text">
                                    Update: I've contacted CBRE Cambodia and requested updated photos of the property.
                                    They've promised to send new images by end of day today. I'll review them as soon as
                                    they arrive.
                                </div>
                                <div class="message-meta">
                                    <div>Maria Johnson</div>
                                    <div class="message-time">2:15 PM</div>
                                </div>
                            </div>

                            <div class="message received">
                                <div class="message-text">
                                    New photos received and reviewed. The discrepancy was due to a recent renovation.
                                    I've updated the listing with the new images and verified the changes. The listing
                                    is now approved and live.
                                </div>
                                <div class="message-meta">
                                    <div>Maria Johnson</div>
                                    <div class="message-time">4:30 PM</div>
                                </div>
                            </div>

                            <div class="message sent">
                                <div class="message-text">
                                    Great work, Maria! Thanks for the quick turnaround. James, the listing has been
                                    updated with accurate photos and is now live on the platform.
                                </div>
                                <div class="message-meta">
                                    <div>You</div>
                                    <div class="message-time">4:45 PM</div>
                                </div>
                            </div>
                        </div>

                        <div class="message-footer">
                            <textarea class="message-input" placeholder="Type your message..."></textarea>
                            <button class="send-btn">Send</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Communication Log (hidden by default) -->
            <div id="user-communication-log" style="display: none;">
                <div class="log-container">
                    <div class="log-header">
                        <div class="user-info">
                            <div class="user-avatar">CB</div>
                            <div>
                                <div class="user-details">CBRE Cambodia</div>
                                <div style="color: var(--gray); font-size: 0.875rem;">james.wilson@cbrecambodia.com
                                </div>
                            </div>
                        </div>
                        <div class="log-actions">
                            <button class="btn btn-outline"><i class="fas fa-envelope"></i> Send Email</button>
                            <button class="btn btn-primary"><i class="fas fa-plus"></i> New Ticket</button>
                        </div>
                    </div>

                    <div class="log-content">
                        <div class="log-entry">
                            <div class="log-icon"
                                style="background-color: rgba(37, 99, 235, 0.1); color: var(--primary);">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div class="log-content">
                                <div class="log-type">Support Ticket #TKT-2023-0915</div>
                                <div class="log-subject">Subscription Payment Issue</div>
                                <div class="log-message">
                                    The monthly subscription payment for our Gold plan was declined. Our card details
                                    are up to date. Can you please check why the payment failed and process it manually?
                                </div>
                                <div class="log-time">Sep 15, 2023 • 10:30 AM</div>
                            </div>
                            <div class="log-actions-cell">
                                <button class="log-btn reply-btn"><i class="fas fa-reply"></i> Reply</button>
                            </div>
                        </div>

                        <div class="log-entry">
                            <div class="log-icon"
                                style="background-color: rgba(5, 150, 105, 0.1); color: var(--secondary);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="log-content">
                                <div class="log-type">Resolution</div>
                                <div class="log-subject">Payment Processed Successfully</div>
                                <div class="log-message">
                                    The payment issue has been resolved. We processed your subscription payment
                                    manually, and your Gold plan is now active until October 15, 2023. An invoice has
                                    been sent to your email.
                                </div>
                                <div class="log-time">Sep 15, 2023 • 2:45 PM</div>
                            </div>
                        </div>

                        <div class="log-entry">
                            <div class="log-icon" style="background-color: rgba(234, 88, 12, 0.1); color: #ea580c;">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="log-content">
                                <div class="log-type">Listing Flagged</div>
                                <div class="log-subject">Luxury Villa in Toul Kork (ID: LV-789456)</div>
                                <div class="log-message">
                                    Your listing "Luxury Villa in Toul Kork" has been flagged for verification due to
                                    photo discrepancies. Please provide updated, accurate photos of the property within
                                    48 hours to avoid suspension.
                                </div>
                                <div class="log-time">Sep 10, 2023 • 11:20 AM</div>
                            </div>
                            <div class="log-actions-cell">
                                <button class="log-btn reply-btn"><i class="fas fa-reply"></i> Reply</button>
                            </div>
                        </div>

                        <div class="log-entry">
                            <div class="log-icon"
                                style="background-color: rgba(5, 150, 105, 0.1); color: var(--secondary);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="log-content">
                                <div class="log-type">Verification Complete</div>
                                <div class="log-subject">Luxury Villa in Toul Kork (ID: LV-789456)</div>
                                <div class="log-message">
                                    Thank you for providing the updated photos. Your listing "Luxury Villa in Toul Kork"
                                    has been verified and is now live on the platform with the new images.
                                </div>
                                <div class="log-time">Sep 10, 2023 • 4:30 PM</div>
                            </div>
                        </div>

                        <div class="log-entry">
                            <div class="log-icon" style="background-color: rgba(234, 88, 12, 0.1); color: #ea580c;">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="log-content">
                                <div class="log-type">Subscription Expiry</div>
                                <div class="log-subject">Gold Plan Expiring Soon</div>
                                <div class="log-message">
                                    Your Gold subscription plan will expire in 7 days (Sep 15, 2023). To continue
                                    enjoying premium benefits, please renew your subscription before the expiry date.
                                </div>
                                <div class="log-time">Sep 8, 2023 • 9:15 AM</div>
                            </div>
                        </div>

                        <div class="log-entry">
                            <div class="log-icon"
                                style="background-color: rgba(37, 99, 235, 0.1); color: var(--primary);">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="log-content">
                                <div class="log-type">Email Sent</div>
                                <div class="log-subject">Welcome to Peanech.com</div>
                                <div class="log-message">
                                    Welcome email sent to james.wilson@cbrecambodia.com with account details and
                                    onboarding information.
                                </div>
                                <div class="log-time">Mar 15, 2023 • 10:00 AM</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Placeholder -->
    <footer style="background-color: var(--dark); color: white; padding: 2rem 0; margin-top: 2rem;">
        <div class="container" style="text-align: center;">
            <p>Peanech.com Admin Dashboard &copy; 2023. All rights reserved.</p>
            <p style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7); margin-top: 0.5rem;">Internal use only.
                Unauthorized access prohibited.</p>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.querySelector('.mobile-menu-btn').addEventListener('click', function () {
            document.querySelector('.nav-links').classList.toggle('show');
            document.querySelector('.user-actions').classList.toggle('show');
        });

        // Tab switching
        document.querySelectorAll('.communication-tab').forEach(tab => {
            tab.addEventListener('click', function () {
                document.querySelectorAll('.communication-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                const isMessaging = this.textContent.trim() === 'Internal Messaging';
                document.getElementById('messaging-system').style.display = isMessaging ? 'block' : 'none';
                document.getElementById('user-communication-log').style.display = isMessaging ? 'none' : 'block';
            });
        });

        // Conversation selection
        document.querySelectorAll('.conversation-item').forEach(item => {
            item.addEventListener('click', function () {
                document.querySelectorAll('.conversation-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                // In a real app, this would load the selected conversation
                const subject = this.querySelector('.conversation-subject').textContent;
                document.querySelector('.message-title').innerHTML = `<i class="fas fa-user"></i> ${this.querySelector('.conversation-name').textContent} - ${subject}`;
            });
        });

        // Send message functionality
        document.querySelector('.send-btn').addEventListener('click', function () {
            const input = document.querySelector('.message-input');
            const message = input.value.trim();

            if (message) {
                const messageContent = document.querySelector('.message-content');
                const newMessage = document.createElement('div');
                newMessage.className = 'message sent';
                newMessage.innerHTML = `
                    <div class="message-text">${message}</div>
                    <div class="message-meta">
                        <div>You</div>
                        <div class="message-time">Just now</div>
                    </div>
                `;

                messageContent.appendChild(newMessage);
                input.value = '';

                // Scroll to bottom
                messageContent.scrollTop = messageContent.scrollHeight;
            }
        });

        // Allow sending message with Enter key (but not Shift+Enter)
        document.querySelector('.message-input').addEventListener('keydown', function (e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                document.querySelector('.send-btn').click();
            }
        });

        // New message button
        document.getElementById('newMessageBtn').addEventListener('click', function () {
            alert('This would open a form to start a new internal message with other administrators.');
        });

        // Reply to user functionality
        document.querySelectorAll('.reply-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                const logEntry = this.closest('.log-entry');
                const subject = logEntry.querySelector('.log-subject').textContent;

                alert(`This would open a messaging interface to reply to the user regarding: ${subject}`);
            });
        });

        // Send email functionality
        document.querySelector('.btn-outline').addEventListener('click', function (e) {
            if (e.target.innerHTML.includes('Send Email')) {
                alert('This would open an email composer to send a message to the user.');
            }
        });

        // New ticket functionality
        document.querySelector('.btn-primary').addEventListener('click', function (e) {
            if (e.target.innerHTML.includes('New Ticket')) {
                alert('This would open a form to create a new support ticket for this user.');
            }
        });
    </script>
</body>

</html>